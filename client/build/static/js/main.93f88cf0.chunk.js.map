{"version":3,"sources":["config/config.js","hooks/http.hook.js","context/AuthContext.js","pages/AuthPage.js","hooks/message.hook.js","pages/CreatePage.js","components/Preloader.js","components/LinkCard.js","pages/DetailPage.js","components/LinksList.js","pages/LinksPage.js","hooks/auth.hook.js","components/NavBar.js","App.js","routes.js","reportWebVitals.js","index.js"],"names":["module","exports","DOMAIN","useHttp","useState","loading","setLoading","error","setError","request","useCallback","url","a","method","body","headers","JSON","stringify","fetch","response","json","data","ok","Error","message","clearError","noop","AuthContext","createContext","token","userId","login","logout","isAuthenticated","require","AuthPage","auth","useContext","text","window","M","toast","html","email","password","form","setForm","useEffect","changeHandler","event","target","name","value","registerHandler","console","log","loginHandler","className","id","type","onChange","htmlFor","disabled","onClick","style","marginRight","CreatePage","history","useHistory","link","setLink","pressHandler","key","from","Authorization","push","_id","paddingTop","e","onKeyPress","Preloader","width","LinkCard","href","to","rel","clicks","Date","date","toLocaleDateString","DetailPage","linkId","useParams","getLink","fetched","LinksList","links","length","map","index","LinksPage","setLinks","fetchLinks","storageName","NavBar","padding","preventDefault","App","setToken","setUserId","ready","setReady","jwtToken","localStorage","setItem","removeItem","parse","getItem","useAuth","routes","path","exact","useRoutes","Provider","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.93f88cf0.chunk.js","sourcesContent":["module.exports = {\r\n    DOMAIN:\"http://localhost:5000\"\r\n}","import { useState, useCallback } from \"react\"\r\n\r\n\r\nexport const useHttp = () => {\r\n    const [loading, setLoading] = useState(false)\r\n    const [error, setError] = useState(null)\r\n\r\n\r\n    const request = useCallback(async(url, method = 'GET', body = null, headers = {}) => {\r\n        setLoading(true)\r\n        try {\r\n            if(body){\r\n                body = JSON.stringify(body)\r\n                headers[\"Content-Type\"] = \"application/json\"\r\n            }\r\n\r\n            const response = await fetch(url, {\r\n                method,\r\n                body,\r\n                headers\r\n            })\r\n            const data = await response.json()\r\n            if (!response.ok) { throw new Error(data.message || \"Something wrong\") }\r\n            setLoading(false)\r\n            return data\r\n\r\n        } catch (e) {\r\n            setLoading(false)\r\n            setError(e.message)\r\n            throw e\r\n        }\r\n    }, [])\r\n    const clearError = useCallback(()=>{setError(null)},[])\r\n    return { loading, request, error, clearError }\r\n}","import {createContext} from 'react'\r\n\r\nfunction noop(){}\r\n\r\nexport const AuthContext = createContext({\r\n    token:null,\r\n    userId:null,\r\n    login:noop,\r\n    logout:noop,\r\n    isAuthenticated:false\r\n})\r\n\r\n","import React, {useContext, useEffect, useState } from 'react'\r\nimport { useHttp } from '../hooks/http.hook'\r\nimport { useMessage } from '../hooks/message.hook'\r\nimport{AuthContext} from '../context/AuthContext'\r\n\r\nconst {DOMAIN} = require('../config/config')\r\n\r\nexport const AuthPage = () => {\r\n  const auth = useContext(AuthContext)\r\n  const message = useMessage()\r\n  const {loading,error,request,clearError } = useHttp()\r\n  const [form,setForm]=useState({\r\n    email:'',password:''\r\n  })\r\n\r\n  useEffect(()=>{\r\n    message(error)\r\n  clearError()\r\n    \r\n  },[error,message,clearError])\r\n\r\n  const changeHandler = event =>{\r\n    setForm({...form,[event.target.name]:event.target.value})\r\n  }\r\n  const registerHandler = async () =>{\r\n    try {\r\n      const data = await request(DOMAIN+\"/api/auth/register\", 'POST', {...form})\r\n      console.log(data)\r\n    } catch (e) {}\r\n  }\r\n  const loginHandler = async () =>{\r\n    try {\r\n      const data = await request(DOMAIN+\"/api/auth/login\", 'POST', {...form})\r\n     auth.login(data.token,data.userId)\r\n    } catch (e) {}\r\n  }\r\n    return (\r\n        <div className = \"row\">\r\n            <div className=\"col s6 offset-s3\">\r\n                <h1>Resize Link</h1>\r\n                <div className=\"card blue-grey darken-1\">\r\n                  <div className=\"card-content white-text\">\r\n                    <span className=\"card-title\">Authorization</span>\r\n                    <div>\r\n                      <div className=\"input-field\">\r\n                        <input  id=\"email\" name =\"email\" type=\"text\"value={form.email} onChange={changeHandler}/>\r\n                        <label htmlFor=\"email\">Email</label>\r\n                    </div>\r\n                    <div className=\"input-field\">\r\n                        <input  id=\"password\" name =\"password\" type=\"password\"value={form.password} onChange={changeHandler} />\r\n                        <label htmlFor=\"password\">Password</label>\r\n                    </div>\r\n                     \r\n                    </div>                   \r\n                  </div>  \r\n                  <div className=\"card-action\">\r\n                   <button className=\"btn yellow darken-4\" disabled={loading} onClick={loginHandler} style={{marginRight:10}}>Enter</button>\r\n                   <button className=\"btn gray lighten-1 black-text\" onClick={registerHandler} disabled={loading}>Register</button>\r\n                  </div>\r\n                </div>\r\n\r\n            </div>\r\n        </div>)\r\n}","import {useCallback} from \"react\"\r\n\r\nexport const useMessage = ()=>{\r\n    return useCallback((text) =>{\r\n        if(window.M && text){\r\n            window.M.toast({html:text})\r\n        }\r\n    },[] )\r\n}","import React, { useContext, useState } from 'react'\r\nimport { AuthContext } from '../context/AuthContext'\r\nimport { useHttp } from '../hooks/http.hook'\r\nimport {useHistory} from 'react-router-dom'\r\nconst{DOMAIN}=require('../config/config')\r\n\r\n\r\nexport const CreatePage = () => {\r\n    const history = useHistory()\r\n    const auth = useContext(AuthContext)\r\n    const {request} = useHttp()\r\n    const [link,setLink]=useState('')\r\n    const pressHandler = async event =>{\r\n        if(event.key === 'Enter'){\r\n            try {\r\n                const data = await request(DOMAIN+'/api/link/generate','POST', {from:link},{\r\n                    Authorization: `Bearer ${auth.token}`\r\n                    \r\n                })\r\n               history.push(`/detail/${data.link._id}`)\r\n            } catch (e) {\r\n                \r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"row\">\r\n            <h1>Create Page</h1>\r\n            <div className=\"col s8 offset-s2\" style={{paddingTop:'2rem'}}>\r\n                <div className=\"input-field\">\r\n                    <input id=\"link\" type=\"text\" value={link} onChange={e=>setLink(e.target.value)} onKeyPress={pressHandler} />\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    )\r\n}","import React from 'react'\r\n\r\nexport const Preloader=()=>\r\n{\r\n    return(<div className=\"progress\">\r\n    <div className=\"determinate\" style={{width: '70%'}}></div>\r\n</div>)\r\n}","import React from 'react'\r\n\r\nexport const LinkCard = ({ link }) => {\r\n  return (\r\n    <>\r\n      <h2>Link</h2>\r\n\r\n      <p>Your Link: <a href={link.to} target=\"_blank\" rel=\"noopener noreferrer\">{link.to}</a></p>\r\n      <p>From: <a href={link.from} target=\"_blank\" rel=\"noopener noreferrer\">{link.from}</a></p>\r\n      <p>Click number: <strong>{link.clicks}</strong></p>\r\n      <p>Creation date: <strong>{new Date(link.date).toLocaleDateString()}</strong></p>\r\n    </>\r\n  )\r\n}","import React, {useCallback, useContext, useEffect, useState} from 'react'\r\nimport {useParams} from 'react-router-dom'\r\nimport {useHttp} from '../hooks/http.hook'\r\nimport {AuthContext} from '../context/AuthContext'\r\nimport {Preloader} from '../components/Preloader'\r\nimport {LinkCard} from '../components/LinkCard'\r\nconst {DOMAIN}=require(\"../config/config\")\r\n\r\nexport const DetailPage = () => {\r\n  const {token} = useContext(AuthContext)\r\n  const {request, loading} = useHttp()\r\n  const [link, setLink] = useState(null)\r\n  const linkId = useParams().id\r\n\r\n  const getLink = useCallback(async () => {\r\n    try {\r\n        \r\n      const fetched = await request(`${DOMAIN}/api/link/${linkId}`, 'GET', null, {\r\n        Authorization: `Bearer ${token}`\r\n      })\r\n      setLink(fetched)\r\n    } catch (e) {}\r\n  }, [token, linkId, request])\r\n\r\n  useEffect(() => {\r\n    getLink()\r\n  }, [getLink])\r\n\r\n  if (loading) {\r\n    return <Preloader />\r\n  }\r\n\r\n  return (\r\n    <>\r\n      { !loading && link && <LinkCard link={link} /> }\r\n    </>\r\n  )\r\n}","import React from 'react'\r\nimport {Link} from 'react-router-dom'\r\n\r\nexport const LinksList = ({ links }) => {\r\n  if (!links.length) {\r\n    return <p className=\"center\">No links yet</p>\r\n  }\r\n\r\n  return (\r\n    <table>\r\n      <thead>\r\n      <tr>\r\n        <th>№</th>\r\n        <th>Original</th>\r\n        <th>Short</th>\r\n        <th>Open</th>\r\n      </tr>\r\n      </thead>\r\n\r\n      <tbody>\r\n      { links.map((link, index) => {\r\n        return (\r\n          <tr key={link._id}>\r\n            <td>{index + 1}</td>\r\n            <td>{link.from}</td>\r\n            <td>{link.to}</td>\r\n            <td>\r\n              <Link to={`/detail/${link._id}`}>Open</Link>\r\n            </td>\r\n          </tr>\r\n        )\r\n      }) }\r\n      </tbody>\r\n    </table>\r\n  )\r\n}","import React, {useCallback, useContext, useEffect, useState} from 'react'\r\nimport {useHttp} from '../hooks/http.hook'\r\nimport {AuthContext} from '../context/AuthContext'\r\nimport {Preloader} from '../components/Preloader'\r\nimport {LinksList} from '../components/LinksList'\r\nconst {DOMAIN}=require(\"../config/config\")\r\n\r\nexport const LinksPage = () => {\r\n  const [links, setLinks] = useState([])\r\n  const {loading, request} = useHttp()\r\n  const {token} = useContext(AuthContext)\r\n\r\n  const fetchLinks = useCallback(async () => {\r\n    try {\r\n      const fetched = await request(DOMAIN+'/api/link', 'GET', null, {\r\n        Authorization: `Bearer ${token}`\r\n      })\r\n      setLinks(fetched)\r\n    } catch (e) {}\r\n  }, [token, request])\r\n\r\n  useEffect(() => {\r\n    fetchLinks()\r\n  }, [fetchLinks])\r\n\r\n  if (loading) {\r\n    return <Preloader/>\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {!loading && <LinksList links={links} />}\r\n    </>\r\n  )\r\n}","import { useCallback, useState, useEffect } from \"react\"\r\n\r\nconst storageName = 'userData'\r\n\r\nexport const useAuth = () => {\r\n    const [token, setToken] = useState(null)\r\n    const [userId, setUserId] = useState(null)\r\n    const [ready, setReady] = useState(false)\r\n\r\n\r\n\r\n    const login = useCallback((jwtToken, id) => {\r\n        setToken(jwtToken)\r\n        setUserId(id)\r\n        localStorage.setItem(storageName, JSON.stringify({\r\n            userId: id,\r\n            token: jwtToken\r\n        }))\r\n    }, [])\r\n\r\n    const logout = useCallback((jwtToken, id) => {\r\n        setToken(null)\r\n        setUserId(null)\r\n        localStorage.removeItem(storageName)\r\n    }, [])\r\n    useEffect(() => {\r\n        const data = JSON.parse(localStorage.getItem(storageName))\r\n\r\n        if (data && data.token) {\r\n            login(data.token, data.userId)\r\n        }\r\n        setReady(true)\r\n    }, [login])\r\n\r\n\r\n    return { login, logout, token, userId, ready}\r\n}","import React, {useContext} from 'react'\r\nimport{NavLink, useHistory}from 'react-router-dom'\r\nimport { AuthContext} from '../context/AuthContext'\r\n\r\nexport const NavBar=()=>{\r\n    const history=useHistory()\r\n    const auth = useContext(AuthContext)\r\n\r\n    const logoutHandler =  event => {\r\n        event.preventDefault()\r\n        auth.logout()    \r\n        history.push('/')\r\n    }\r\n    return(<nav>\r\n        <div className=\"nav-wrapper blue darken-4 \"style={{padding:'0 2rem'}}>\r\n          <a href=\"/\" className=\"brand-logo\">Logo</a>\r\n          <ul id=\"nav-mobile\" className=\"right hide-on-med-and-down\">\r\n            <li><NavLink to=\"/create\">Create</NavLink></li>\r\n            <li><NavLink to=\"/links\">Links</NavLink></li>\r\n            <li><a href=\"/\" onClick={logoutHandler}>Logout</a></li>\r\n          </ul>\r\n        </div>\r\n      </nav>)\r\n\r\n}","import React from \"react\"\nimport \"materialize-css\"\nimport { useRoutes } from \"./routes\";\nimport{BrowserRouter as Router} from \"react-router-dom\"\nimport { useAuth } from \"./hooks/auth.hook\";\nimport{AuthContext} from './context/AuthContext'\nimport{NavBar}from './components/NavBar'\nimport {Preloader} from './components/Preloader'\n\n\nfunction App() {\n    const {token,login,logout,userId,ready}=useAuth()\n    const isAuthenticated = !!token\n    const routes = useRoutes(isAuthenticated)\n\n    if(!ready){\n        return <Preloader/>\n    }\n\n    return ( <AuthContext.Provider value={{token,login,logout,userId,isAuthenticated}}>\n        <Router>\n            {isAuthenticated && <NavBar/>}\n            <div className=\"container\">\n                {routes}\n            </div>\n        </Router>\n        </AuthContext.Provider>)\n    }\n\n    export default App;","import React from 'react'\r\nimport {Switch, Route, Redirect} from 'react-router-dom'\r\nimport { AuthPage } from './pages/AuthPage'\r\nimport { CreatePage } from './pages/CreatePage'\r\nimport { DetailPage } from './pages/DetailPage'\r\nimport { LinksPage } from './pages/LinksPage'\r\n\r\nexport const useRoutes = isAuthenticated =>{\r\n    if(isAuthenticated){\r\n        return(\r\n            <Switch>\r\n                <Route path=\"/links\"exact>\r\n                    <LinksPage />\r\n                </Route>\r\n                <Route path=\"/create\"exact>\r\n                    <CreatePage />\r\n                </Route>\r\n                <Route path=\"/detail/:id\">\r\n                    <DetailPage />\r\n                </Route>\r\n                <Redirect to=\"/create\" />\r\n            </Switch>)\r\n    }\r\n    return(\r\n        <Switch>\r\n            <Route path=\"/\" exact>\r\n                <AuthPage />\r\n            </Route>\r\n            <Redirect to=\"/\" />\r\n\r\n        </Switch>)\r\n}\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}